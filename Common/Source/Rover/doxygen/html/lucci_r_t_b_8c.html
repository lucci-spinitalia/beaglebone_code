<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>robotRTB: /home/erupter/Apps/netbeans_apps/LagalaRTB-V2/lucciRTB.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">robotRTB
   
   </div>
   <div id="projectbrief">A Return To Base for remote controlled semi authonomous rovers</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('lucci_r_t_b_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">/home/erupter/Apps/netbeans_apps/LagalaRTB-V2/lucciRTB.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="lucci_p_l_a_n_8h_source.html">lucciPLAN.h</a>&quot;</code><br/>
</div>
<p><a href="lucci_r_t_b_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>&#160;&#160;&#160;2.0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#ac69db5bce4c5622394f11c324d3321cc">local_pi_2</a>&#160;&#160;&#160;1.570796327</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a75f22cf4619e867c40a44dfbca495fe7">RTB_internal_getdistance</a> (<a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> x1, <a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> y1, <a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> x2, <a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> y2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#ab8649dee03c761352db0d39c4b94eba9">RTB_internal_clean_cache</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#aad21cfc432a06ce440bd0523a1b59563">RTB_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB initialization call.  <a href="#aad21cfc432a06ce440bd0523a1b59563"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a5eb64be1ae6b44581d8d9806f9c5c388">RTB_internal_disable</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a4641bfa60572500aac762492e1222340">RTB_set_mode</a> (<a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#aa78d9a33d09f033667c54b439a3aa5c1">RTB_mode</a> mode)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB mode selection.  <a href="#a4641bfa60572500aac762492e1222340"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#ae20dabb7cb0e560287034d8ac054cd0a">RTB_internal_flush</a> (<a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> localx, <a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> localy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a7700cb21018984ea0a1bc325f0707041">RTB_update</a> (<a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> localx, <a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> localy, <a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> xspeed, <a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> aspeed)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB main cycle handler.  <a href="#a7700cb21018984ea0a1bc325f0707041"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#af9649c87998deaf9394a0edcb629395d">RTB_internal_counter</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a71daa037081252fd247dd0d84314ce42">RTB_internal_decimator</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_r_t_b__status.html">RTB_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_r_t_b__point.html">RTB_point</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_r_t_b__point.html">RTB_point</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a5d5c94f5051e99a357cdd215e5328f27">RTB_internal_point_previous</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_r_t_b__point.html">RTB_point</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a5a59086d6bc37d0e66062d6dd4f92484">RTB_internal_point_next</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_r_t_b__point.html">RTB_point</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_r_t_b__point.html">RTB_point</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a40fa645b4a40a3a307bf23d7f9f81a0a">RTB_internal_initialized</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#aaba4ff9c624855c9c1cb062b32b3ad9c">RTB_active</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a3bb446028e9e6cd7f6b913f31f1c2128">RTB_complete</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#aa6a825d7aa20bc28a3010567f62d9df7">RTB_reset</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#ad2d5a125474b6b0c15e28a7a9626873b">RTB_internal_distance</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#ab0b34276659af26c5c4042b940d48c95">RTB_internal_angular_multiplier</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a89e3e608a7607eb35972d818e10b4e96">RTB_internal_distance_threshold</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a03cad3139139701ef8825c7b6f208a01">RTB_internal_longitudinal_multiplier</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lucci_r_t_b_8c.html#a002529188364ee5f8dfd98667a6adda1">RTB_internal_previous_speed</a> = 0</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abf18cf840fb1c368896d65fa99c175bb"></a><!-- doxytag: member="lucciRTB.c::local_offset" ref="abf18cf840fb1c368896d65fa99c175bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>&#160;&#160;&#160;2.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00001">1</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00097">RTB_internal_flush()</a>, and <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="ac69db5bce4c5622394f11c324d3321cc"></a><!-- doxytag: member="lucciRTB.c::local_pi_2" ref="ac69db5bce4c5622394f11c324d3321cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="lucci_r_t_b_8c.html#ac69db5bce4c5622394f11c324d3321cc">local_pi_2</a>&#160;&#160;&#160;1.570796327</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00002">2</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aad21cfc432a06ce440bd0523a1b59563"></a><!-- doxytag: member="lucciRTB.c::RTB_init" ref="aad21cfc432a06ce440bd0523a1b59563" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="lucci_r_t_b_8h.html#aad21cfc432a06ce440bd0523a1b59563">RTB_init</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB initialization call. </p>
<p>This function must be called when the module is loaded, it sets the internal status to a known state. It is not necessary to call this function any further after initialization. </p>

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00068">68</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>References <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00085">RTB_status::complete</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00086">RTB_status::control_values</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00087">RTB_status::distance</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00036">RTBvehicle_control::heading</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00084">RTB_status::mode</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00065">RTB_idle</a>, and <a class="el" href="lucci_r_t_b_8c_source.html#l00020">RTB_internal_initialized</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#a49205220e9d3214b9c8386ef48d57d96">complete</a> = 0;
    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#ade7ab65000699181974a8aaa1344b6d6">control_values</a>.<a class="code" href="struct_r_t_bvehicle__control.html#a95dc455e6b25a751ef6a25e393790334">heading</a> = -1;
    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#a1c4023bf5a1ee4419371c9250b08b00b">distance</a> = -1;
    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aaa40f3fb35b9e45e6c9ba65c06fa3f03">mode</a> = <a class="code" href="lucci_s_e_r_v_i_c_e_8h.html#aa78d9a33d09f033667c54b439a3aa5c1a1d87f394c2d7bae89a7538660665e17f">RTB_idle</a>;    
    <a class="code" href="lucci_r_t_b_8c.html#a40fa645b4a40a3a307bf23d7f9f81a0a">RTB_internal_initialized</a> = 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab8649dee03c761352db0d39c4b94eba9"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_clean_cache" ref="ab8649dee03c761352db0d39c4b94eba9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="lucci_r_t_b_8c.html#ab8649dee03c761352db0d39c4b94eba9">RTB_internal_clean_cache</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00050">50</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>References <a class="el" href="lucci_r_t_b_8h_source.html#l00234">RTB_point::next</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00235">RTB_point::previous</a>, and <a class="el" href="lucci_r_t_b_8c_source.html#l00019">RTB_internal_point_last</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00077">RTB_internal_disable()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)">RTB_point</a> * local_point;
    local_point=<a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>;
    <span class="keywordflow">while</span> (local_point-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>!=NULL)
    {
        local_point=local_point-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>;
        free(local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>);
    }
    free(local_point);
    
    <a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>=NULL;
    <a class="code" href="lucci_r_t_b_8c.html#a5d5c94f5051e99a357cdd215e5328f27">RTB_internal_point_previous</a>=NULL;
    <a class="code" href="lucci_r_t_b_8c.html#a5a59086d6bc37d0e66062d6dd4f92484">RTB_internal_point_next</a>=NULL;
    <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>=NULL;
    <a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>=NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5eb64be1ae6b44581d8d9806f9c5c388"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_disable" ref="a5eb64be1ae6b44581d8d9806f9c5c388" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="lucci_r_t_b_8c.html#a5eb64be1ae6b44581d8d9806f9c5c388">RTB_internal_disable</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00077">77</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>References <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00085">RTB_status::complete</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00086">RTB_status::control_values</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00087">RTB_status::distance</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00036">RTBvehicle_control::heading</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00084">RTB_status::mode</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00065">RTB_idle</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00050">RTB_internal_clean_cache()</a>, and <a class="el" href="lucci_r_t_b_8c_source.html#l00017">RTB_internal_counter</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00088">RTB_set_mode()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aaa40f3fb35b9e45e6c9ba65c06fa3f03">mode</a> = <a class="code" href="lucci_s_e_r_v_i_c_e_8h.html#aa78d9a33d09f033667c54b439a3aa5c1a1d87f394c2d7bae89a7538660665e17f">RTB_idle</a>;
    <a class="code" href="lucci_r_t_b_8c.html#ab8649dee03c761352db0d39c4b94eba9">RTB_internal_clean_cache</a>();
    <a class="code" href="lucci_r_t_b_8c.html#af9649c87998deaf9394a0edcb629395d">RTB_internal_counter</a>=0;
    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#ade7ab65000699181974a8aaa1344b6d6">control_values</a>.<a class="code" href="struct_r_t_bvehicle__control.html#a95dc455e6b25a751ef6a25e393790334">heading</a> = -1;
    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#a1c4023bf5a1ee4419371c9250b08b00b">distance</a> = -1;
    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#a49205220e9d3214b9c8386ef48d57d96">complete</a> = 0;
    
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae20dabb7cb0e560287034d8ac054cd0a"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_flush" ref="ae20dabb7cb0e560287034d8ac054cd0a" args="(RTB_FLOAT_TYPE localx, RTB_FLOAT_TYPE localy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="lucci_r_t_b_8c.html#ae20dabb7cb0e560287034d8ac054cd0a">RTB_internal_flush</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>localx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>localy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00097">97</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>References <a class="el" href="lucci_r_t_b_8c_source.html#l00001">local_offset</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00234">RTB_point::next</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00235">RTB_point::previous</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00026">RTB_FLOAT_TYPE</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00131">RTB_FLUSH_DIST_TRSH</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00152">RTB_GUIDE_UPDATE_TIME_TRSH</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00017">RTB_internal_counter</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00017">RTB_internal_decimator</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00033">RTB_internal_getdistance()</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00231">RTB_point::x</a>, and <a class="el" href="lucci_r_t_b_8h_source.html#l00232">RTB_point::y</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(<a class="code" href="lucci_r_t_b_8c.html#af9649c87998deaf9394a0edcb629395d">RTB_internal_counter</a> &gt; 5)
    {
        <span class="keywordflow">if</span> ((<a class="code" href="lucci_r_t_b_8c.html#a71daa037081252fd247dd0d84314ce42">RTB_internal_decimator</a> % <a class="code" href="lucci_r_t_b_8h.html#a713878e178e5e1d91d0835fd17ce976f" title="RTB Track-mode global update frequency.">RTB_GUIDE_UPDATE_TIME_TRSH</a>) == 0)
        {
            <a class="code" href="lucci_r_t_b_8c.html#a71daa037081252fd247dd0d84314ce42">RTB_internal_decimator</a>=1;
            <a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)">RTB_point</a>* local_point;
            <a class="code" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9" title="RTB float type mask definition.">RTB_FLOAT_TYPE</a> local_distance;
            local_point = <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>;
            <span class="keywordflow">while</span>((local_distance= <a class="code" href="lucci_r_t_b_8c.html#a75f22cf4619e867c40a44dfbca495fe7">RTB_internal_getdistance</a>(localx,localy,local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,local_point-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>) &gt; <a class="code" href="lucci_r_t_b_8h.html#a6befc91cfa0b08ff06c16443a1898bd5" title="RTB Record-mode waypoint flushing distance threshold.">RTB_FLUSH_DIST_TRSH</a>) &amp;&amp; (local_point-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a> != NULL))
            {
                local_point=local_point-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>;
            }
            
            <span class="keywordflow">if</span> (local_point == <a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>)
            
                <span class="keywordflow">return</span>;
            
            
            <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a> = local_point;
            local_point=local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>;
            <span class="keywordflow">while</span>(local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a> != NULL)
            {
                local_point=local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>;
                free(local_point);
            }
            free(<a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>);
            <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>=NULL;

            <span class="comment">//REFRESH PLAYER/STAGE POINTS</span>
<span class="preprocessor">#if (SIMUL == 1)</span>
<span class="preprocessor"></span>            {
                playerc_graphics2d_clear(PlayerLocalGraphics2D);
                player_point_2d_t points[4];
                player_color_t color;
                <span class="comment">/*color.blue=20;</span>
<span class="comment">                color.green=20;</span>
<span class="comment">                color.red=255;</span>
<span class="comment">                color.alpha = 160;</span>
<span class="comment">                points[0].px=1+localx;</span>
<span class="comment">                points[0].py=0+localy+local_offset;</span>
<span class="comment">                points[1].px=0+localx;</span>
<span class="comment">                points[1].py=1.5+localy+local_offset;</span>
<span class="comment">                points[2].px=-1+localx;</span>
<span class="comment">                points[2].py=0+localy+local_offset;</span>
<span class="comment">                points[3].px=0+localx;</span>
<span class="comment">                points[3].py=-1.5+localy+local_offset;              </span>
<span class="comment">                playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);*/</span>

                color.blue=20;
                color.green=255;
                color.red=20;
                color.alpha = 160;                
                points[0].px=1+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[0].py=0+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[1].px=0+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[1].py=1.5+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[2].px=-1+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[2].py=0+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[3].px=0+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[3].py=-1.5+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;                
                playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);
                
                color.blue=255;
                color.green=30;
                color.red=30;
                color.alpha = 160;
                local_point=<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>;
                <span class="keywordflow">while</span> (local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a> != NULL)
                {
                    points[0].px=0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                    points[0].py=0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                    points[1].px=-0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                    points[1].py=0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                    points[2].px=-0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                    points[2].py=-0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                    points[3].px=0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                    points[3].py=-0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;                
                    playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);
                    local_point=local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>;
                }
                points[0].px=0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[0].py=0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[1].px=-0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[1].py=0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[2].px=-0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[2].py=-0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[3].px=0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[3].py=-0.5+local_point-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;                
                playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);
            }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="lucci_r_t_b_8c.html#a71daa037081252fd247dd0d84314ce42">RTB_internal_decimator</a>++;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a75f22cf4619e867c40a44dfbca495fe7"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_getdistance" ref="a75f22cf4619e867c40a44dfbca495fe7" args="(RTB_FLOAT_TYPE x1, RTB_FLOAT_TYPE y1, RTB_FLOAT_TYPE x2, RTB_FLOAT_TYPE y2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> <a class="el" href="lucci_r_t_b_8c.html#a75f22cf4619e867c40a44dfbca495fe7">RTB_internal_getdistance</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>x1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>y1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>x2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>y2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00033">33</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00097">RTB_internal_flush()</a>, and <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">double</span> temp1,temp2,temp3;
    temp1=pow(x2-x1,2);
    temp2=pow(y2-y1,2);
    <span class="keywordflow">return</span> (sqrt(pow(x2-x1,2)+ pow(y2-y1,2)));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4641bfa60572500aac762492e1222340"></a><!-- doxytag: member="lucciRTB.c::RTB_set_mode" ref="a4641bfa60572500aac762492e1222340" args="(RTB_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="lucci_r_t_b_8h.html#a6d094e0fe0de9c382cbceea01b4740d9">RTB_set_mode</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#aa78d9a33d09f033667c54b439a3aa5c1">RTB_mode</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB mode selection. </p>
<p>Used in conjunction with RTB_mode </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#aa78d9a33d09f033667c54b439a3aa5c1" title="RTB operating main mode enumeration.">RTB_mode</a></dd></dl>
<p>Parent program must actively call this function to change operating mode of the module. </p>

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00088">88</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>References <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00084">RTB_status::mode</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00065">RTB_idle</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00077">RTB_internal_disable()</a>, and <a class="el" href="lucci_r_t_b_8c_source.html#l00020">RTB_internal_initialized</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aaa40f3fb35b9e45e6c9ba65c06fa3f03">mode</a> &gt; 0 &amp;&amp; mode == <a class="code" href="lucci_s_e_r_v_i_c_e_8h.html#aa78d9a33d09f033667c54b439a3aa5c1a1d87f394c2d7bae89a7538660665e17f">RTB_idle</a>)
        <a class="code" href="lucci_r_t_b_8c.html#a5eb64be1ae6b44581d8d9806f9c5c388">RTB_internal_disable</a>();
    <span class="keywordflow">if</span> (<a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aaa40f3fb35b9e45e6c9ba65c06fa3f03">mode</a> == <a class="code" href="lucci_s_e_r_v_i_c_e_8h.html#aa78d9a33d09f033667c54b439a3aa5c1a1d87f394c2d7bae89a7538660665e17f">RTB_idle</a>)
        assert (<a class="code" href="lucci_r_t_b_8c.html#a40fa645b4a40a3a307bf23d7f9f81a0a">RTB_internal_initialized</a> == 1);
    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aaa40f3fb35b9e45e6c9ba65c06fa3f03">mode</a> = mode;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7700cb21018984ea0a1bc325f0707041"></a><!-- doxytag: member="lucciRTB.c::RTB_update" ref="a7700cb21018984ea0a1bc325f0707041" args="(RTB_FLOAT_TYPE localx, RTB_FLOAT_TYPE localy, RTB_FLOAT_TYPE xspeed, RTB_FLOAT_TYPE aspeed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="lucci_r_t_b_8h.html#a7700cb21018984ea0a1bc325f0707041">RTB_update</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>localx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>localy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>xspeed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>aspeed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB main cycle handler. </p>
<p>This function must be periodically called to guarantee correct recording of positions. It is designed to be integrated in a superloop. If the module is disabled, calling this function won't affect performance, as no operations will be performed in such a case (the module will check its state and immediately return). </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">localx</td><td>value either euclidean or lon </td></tr>
    <tr><td class="paramname">localy</td><td>value either euclidean or lat </td></tr>
    <tr><td class="paramname">xspeed</td><td></td></tr>
    <tr><td class="paramname">aspeed</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a pointer to the current status </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="struct_r_t_b__status.html" title="RTB main status structure.">RTB_status</a>, <a class="el" href="lucci_r_t_b_8h.html#a89999196aaf3be0aaa4007c7f414c50f" title="RTB operating mode selection.">RTB_GEO_MODE</a> </dd></dl>

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00199">199</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>References <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00086">RTB_status::control_values</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00088">RTB_status::control_vector</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00087">RTB_status::distance</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00233">RTB_point::distance_from_start</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00036">RTBvehicle_control::heading</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00001">local_offset</a>, <a class="el" href="lucci_p_l_a_n_8c_source.html#l00019">lucciPLAN_givedir_multiparam()</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8c_source.html#l00031">lucciSERVICE_vect_normalize()</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8c_source.html#l00054">lucciSERVICE_vect_set_norm()</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00084">RTB_status::mode</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00234">RTB_point::next</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00235">RTB_point::previous</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00026">RTB_FLOAT_TYPE</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00140">RTB_GUIDE_CHANGE_DIST_TRSH</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00021">RTB_internal_angular_multiplier</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00017">RTB_internal_counter</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00021">RTB_internal_distance</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00021">RTB_internal_distance_threshold</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00097">RTB_internal_flush()</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00033">RTB_internal_getdistance()</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00021">RTB_internal_longitudinal_multiplier</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00019">RTB_internal_point_last</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00019">RTB_internal_point_start</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00021">RTB_internal_previous_speed</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00179">RTB_MIN_WAYPOINT_DIST</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00066">RTB_recording</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00110">RTB_SAVE_DIST_ADAPTIVE_ANGULAR_SENSITIVITY</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00121">RTB_SAVE_DIST_ADAPTIVE_MAX_ANGULAR_SPEED</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00089">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00099">RTB_SAVE_DIST_ADAPTIVE_MIN_SPEED</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00053">RTB_SAVE_DIST_TRSH</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00067">RTB_tracking</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00037">RTBvehicle_control::speed</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00051">RTBvector::x</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00231">RTB_point::x</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00052">RTBvector::y</a>, and <a class="el" href="lucci_r_t_b_8h_source.html#l00232">RTB_point::y</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9" title="RTB float type mask definition.">RTB_FLOAT_TYPE</a> distance;
    <span class="keywordflow">switch</span>(<a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aaa40f3fb35b9e45e6c9ba65c06fa3f03">mode</a>)
    {
        <span class="keywordflow">case</span> <a class="code" href="lucci_s_e_r_v_i_c_e_8h.html#aa78d9a33d09f033667c54b439a3aa5c1a1c21e80be000b896233e829b6c288421">RTB_recording</a>:
            <span class="keywordflow">if</span> (<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>==NULL)
            {
<span class="preprocessor">#if (DEBUG == 1)</span>
<span class="preprocessor"></span>                printf(<span class="stringliteral">&quot;Actual x and y: %3.2f  -  %3.2f\n&quot;</span>,localx,localy);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                <a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a> = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)">RTB_point</a>));
                <a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>=localx;
                <a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>=localy;
                <a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a317ee13f7ee24efb53d59dc696e9abbd">distance_from_start</a>=0;
                <a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>=NULL;
                <a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>=NULL;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a> = <a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>;
                <a class="code" href="lucci_r_t_b_8c.html#af9649c87998deaf9394a0edcb629395d">RTB_internal_counter</a>++;
<span class="preprocessor">#if (SIMUL == 1)                </span>
<span class="preprocessor"></span>                <span class="comment">/* graphic helpers drawing*/</span>
                player_point_2d_t points[4];
                player_color_t color;
                <span class="comment">/*color.blue=20;</span>
<span class="comment">                color.green=20;</span>
<span class="comment">                color.red=255;</span>
<span class="comment">                color.alpha = 160;</span>
<span class="comment">                points[0].px=1+localx;</span>
<span class="comment">                points[0].py=0+localy+local_offset;</span>
<span class="comment">                points[1].px=0+localx;</span>
<span class="comment">                points[1].py=1.5+localy+local_offset;</span>
<span class="comment">                points[2].px=-1+localx;</span>
<span class="comment">                points[2].py=0+localy+local_offset;</span>
<span class="comment">                points[3].px=0+localx;</span>
<span class="comment">                points[3].py=-1.5+localy+local_offset;                </span>
<span class="comment">                playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);*/</span>

                color.blue=20;
                color.green=255;
                color.red=20;
                color.alpha = 160;                
                points[0].px=1+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[0].py=0+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[1].px=0+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[1].py=1.5+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[2].px=-1+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[2].py=0+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[3].px=0+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[3].py=-1.5+<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;                
                playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);
<span class="preprocessor">#endif             </span>
<span class="preprocessor"></span>                <span class="comment">//return &amp;RTBstatus;</span>
            }

<span class="preprocessor">#if (RTB_SAVE_DIST_ADAPTIVE_ANGULAR==0 &amp;&amp; RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL==0)</span>
<span class="preprocessor"></span>            
            <a class="code" href="lucci_r_t_b_8c.html#ad2d5a125474b6b0c15e28a7a9626873b">RTB_internal_distance</a> = <a class="code" href="lucci_r_t_b_8c.html#a75f22cf4619e867c40a44dfbca495fe7">RTB_internal_getdistance</a>(localx,localy,<a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);
            <span class="keywordflow">if</span> (<a class="code" href="lucci_r_t_b_8c.html#ad2d5a125474b6b0c15e28a7a9626873b">RTB_internal_distance</a> &gt;= <a class="code" href="lucci_r_t_b_8h.html#ae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a>)
            {
                <a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)">RTB_point</a> *local_point;
                local_point = <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a> = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)">RTB_point</a>));
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a> = <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a> = local_point;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>=NULL;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>=localx;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>=localy;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a317ee13f7ee24efb53d59dc696e9abbd">distance_from_start</a>=<a class="code" href="lucci_r_t_b_8c.html#ad2d5a125474b6b0c15e28a7a9626873b">RTB_internal_distance</a>;
                <a class="code" href="lucci_r_t_b_8c.html#af9649c87998deaf9394a0edcb629395d">RTB_internal_counter</a>++;
<span class="preprocessor">#if (SIMUL == 1)</span>
<span class="preprocessor"></span>                player_color_t color;
                color.blue=255;
                color.green=30;
                color.red=30;
                color.alpha = 160;
                player_point_2d_t points[4];
                points[0].px=0.5+localx;
                points[0].py=0.5+localy+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[1].px=-0.5+localx;
                points[1].py=0.5+localy+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[2].px=-0.5+localx;
                points[2].py=-0.5+localy+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[3].px=0.5+localx;
                points[3].py=-0.5+localy+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;                
                playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);
<span class="preprocessor">#endif (SIMUL == 1)</span>
<span class="preprocessor"></span>
            }
            <a class="code" href="lucci_r_t_b_8c.html#ae20dabb7cb0e560287034d8ac054cd0a">RTB_internal_flush</a>(localx,localy);
            <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#a1c4023bf5a1ee4419371c9250b08b00b">distance</a> = <a class="code" href="lucci_r_t_b_8c.html#a75f22cf4619e867c40a44dfbca495fe7">RTB_internal_getdistance</a>(localx,localy,<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);

<span class="preprocessor">#else</span>
<span class="preprocessor"></span><span class="preprocessor">#if (RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL)</span>
<span class="preprocessor"></span>            <span class="keywordflow">if</span> (xspeed == 0)
                xspeed = <a class="code" href="lucci_r_t_b_8h.html#a69562c01af04d8e9310b8588c646fb38" title="RTB Record-mode adaptive saving distance, maximum speed.">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>;
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xspeed &lt; <a class="code" href="lucci_r_t_b_8h.html#a4efaf4d66cac7746e1746e0bdf66038a" title="RTB Record-mode adaptive saving distance, minimum speed.">RTB_SAVE_DIST_ADAPTIVE_MIN_SPEED</a>)
                xspeed = <a class="code" href="lucci_r_t_b_8h.html#a4efaf4d66cac7746e1746e0bdf66038a" title="RTB Record-mode adaptive saving distance, minimum speed.">RTB_SAVE_DIST_ADAPTIVE_MIN_SPEED</a>;
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xspeed &gt; <a class="code" href="lucci_r_t_b_8h.html#a69562c01af04d8e9310b8588c646fb38" title="RTB Record-mode adaptive saving distance, maximum speed.">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>)
                xspeed = <a class="code" href="lucci_r_t_b_8h.html#a69562c01af04d8e9310b8588c646fb38" title="RTB Record-mode adaptive saving distance, maximum speed.">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>            <a class="code" href="lucci_r_t_b_8c.html#a03cad3139139701ef8825c7b6f208a01">RTB_internal_longitudinal_multiplier</a> = 1;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>            
            <a class="code" href="lucci_r_t_b_8c.html#a03cad3139139701ef8825c7b6f208a01">RTB_internal_longitudinal_multiplier</a> = xspeed / <a class="code" href="lucci_r_t_b_8h.html#a69562c01af04d8e9310b8588c646fb38" title="RTB Record-mode adaptive saving distance, maximum speed.">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>;
            
            
<span class="preprocessor">#if (RTB_SAVE_DIST_ADAPTIVE_ANGULAR)</span>
<span class="preprocessor"></span>            <span class="keywordflow">if</span> (aspeed == 0)
                <a class="code" href="lucci_r_t_b_8c.html#ab0b34276659af26c5c4042b940d48c95">RTB_internal_angular_multiplier</a> = 1;
            <span class="keywordflow">else</span>
            {
                
                
                <a class="code" href="lucci_r_t_b_8c.html#ab0b34276659af26c5c4042b940d48c95">RTB_internal_angular_multiplier</a> = 1 - <a class="code" href="lucci_r_t_b_8h.html#af775671092e909720aa83d07369c3e5d" title="RTB Record-mode adaptive saving distance, angular sensitivity.">RTB_SAVE_DIST_ADAPTIVE_ANGULAR_SENSITIVITY</a>*(sqrt(aspeed*aspeed)/<a class="code" href="lucci_r_t_b_8h.html#aec56cd672d57ef7860c27b9f2f431f5a" title="RTB Record-mode adaptive saving distance, maximum angular speed.">RTB_SAVE_DIST_ADAPTIVE_MAX_ANGULAR_SPEED</a>);
                <span class="keywordflow">if</span> (<a class="code" href="lucci_r_t_b_8c.html#ab0b34276659af26c5c4042b940d48c95">RTB_internal_angular_multiplier</a> &lt; 0.05)
                    <a class="code" href="lucci_r_t_b_8c.html#ab0b34276659af26c5c4042b940d48c95">RTB_internal_angular_multiplier</a> = 0.05;
                <span class="keywordflow">if</span> (<a class="code" href="lucci_r_t_b_8c.html#ab0b34276659af26c5c4042b940d48c95">RTB_internal_angular_multiplier</a> &gt; 1)
                    <a class="code" href="lucci_r_t_b_8c.html#ab0b34276659af26c5c4042b940d48c95">RTB_internal_angular_multiplier</a> = 1;
            }
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>            <a class="code" href="lucci_r_t_b_8c.html#ab0b34276659af26c5c4042b940d48c95">RTB_internal_angular_multiplier</a> = 1;
            
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>            
            <a class="code" href="lucci_r_t_b_8c.html#a89e3e608a7607eb35972d818e10b4e96">RTB_internal_distance_threshold</a> = MIN(<a class="code" href="lucci_r_t_b_8h.html#ae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a> * <a class="code" href="lucci_r_t_b_8c.html#a03cad3139139701ef8825c7b6f208a01">RTB_internal_longitudinal_multiplier</a>, <a class="code" href="lucci_r_t_b_8h.html#ae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a>*<a class="code" href="lucci_r_t_b_8c.html#ab0b34276659af26c5c4042b940d48c95">RTB_internal_angular_multiplier</a>);
            <span class="keywordflow">if</span> (<a class="code" href="lucci_r_t_b_8c.html#a89e3e608a7607eb35972d818e10b4e96">RTB_internal_distance_threshold</a> &lt; <a class="code" href="lucci_r_t_b_8h.html#ab0f01bec4fa5671bf73c5e8721fd8e9c" title="RTB minimum distance between waypoints.">RTB_MIN_WAYPOINT_DIST</a>)
                <a class="code" href="lucci_r_t_b_8c.html#a89e3e608a7607eb35972d818e10b4e96">RTB_internal_distance_threshold</a> = <a class="code" href="lucci_r_t_b_8h.html#ab0f01bec4fa5671bf73c5e8721fd8e9c" title="RTB minimum distance between waypoints.">RTB_MIN_WAYPOINT_DIST</a>;
            
            <span class="comment">//dbg_print(&quot;RTB&quot;,&quot;Long_mult %3.2f, Ang_mult %3.2f, dst_trsh %3.2f\n&quot;,RTB_internal_longitudinal_multiplier, RTB_internal_angular_multiplier, RTB_internal_distance_threshold);</span>
                        
            <a class="code" href="lucci_r_t_b_8c.html#ad2d5a125474b6b0c15e28a7a9626873b">RTB_internal_distance</a> = <a class="code" href="lucci_r_t_b_8c.html#a75f22cf4619e867c40a44dfbca495fe7">RTB_internal_getdistance</a>(localx,localy,<a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);
            <span class="keywordflow">if</span> (<a class="code" href="lucci_r_t_b_8c.html#ad2d5a125474b6b0c15e28a7a9626873b">RTB_internal_distance</a> &gt;= <a class="code" href="lucci_r_t_b_8c.html#a89e3e608a7607eb35972d818e10b4e96">RTB_internal_distance_threshold</a>)
            {
                <a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)">RTB_point</a> *local_point;
                local_point = <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a> = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)">RTB_point</a>));
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a> = <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a> = local_point;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>=NULL;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>=localx;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>=localy;
                <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a317ee13f7ee24efb53d59dc696e9abbd">distance_from_start</a>=<a class="code" href="lucci_r_t_b_8c.html#ad2d5a125474b6b0c15e28a7a9626873b">RTB_internal_distance</a>;
                <a class="code" href="lucci_r_t_b_8c.html#af9649c87998deaf9394a0edcb629395d">RTB_internal_counter</a>++;
<span class="preprocessor">#if (SIMUL == 1)                </span>
<span class="preprocessor"></span>                player_color_t color;
                color.blue=255;
                color.green=30;
                color.red=30;
                color.alpha = 160;
                player_point_2d_t points[4];
                points[0].px=0.5+localx;
                points[0].py=0.5+localy+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[1].px=-0.5+localx;
                points[1].py=0.5+localy+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[2].px=-0.5+localx;
                points[2].py=-0.5+localy+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;
                points[3].px=0.5+localx;
                points[3].py=-0.5+localy+<a class="code" href="lucci_r_t_b_8c.html#abf18cf840fb1c368896d65fa99c175bb">local_offset</a>;                
                playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
            }
            <a class="code" href="lucci_r_t_b_8c.html#ae20dabb7cb0e560287034d8ac054cd0a">RTB_internal_flush</a>(localx,localy);
            <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#a1c4023bf5a1ee4419371c9250b08b00b">distance</a> = <a class="code" href="lucci_r_t_b_8c.html#a75f22cf4619e867c40a44dfbca495fe7">RTB_internal_getdistance</a>(localx,localy,<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);
            
<span class="comment">/*</span>
<span class="comment">#elif (RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL &amp;&amp; !RTB_SAVE_DIST_ADAPTIVE_ANGULAR)</span>
<span class="comment">            int a = 1;</span>
<span class="comment">            </span>
<span class="comment">#elif (!RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL &amp;&amp; RTB_SAVE_DIST_ADAPTIVE_ANGULAR)</span>
<span class="comment">            int a = 1;</span>
<span class="comment">            </span>
<span class="comment">#elif (RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL &amp;&amp; RTB_SAVE_DIST_ADAPTIVE_ANGULAR)</span>
<span class="comment">            int a = 1;*/</span>
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>            <a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a> = <a class="code" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a>;
        <span class="keywordflow">break</span>;
    
        <span class="keywordflow">case</span> <a class="code" href="lucci_s_e_r_v_i_c_e_8h.html#aa78d9a33d09f033667c54b439a3aa5c1ae6cbb9f39ed9b2d62465b452b4b13b9f">RTB_tracking</a>:
            
            <span class="comment">//RTB_internal_flush(localx,localy);</span>
            <span class="keywordflow">if</span> (<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a> == <a class="code" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a>)
            {
                    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a>.<a class="code" href="struct_r_t_bvector.html#a3bc7ea081d3ac2063258f6c30703055a">x</a>=0;
                    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a>.<a class="code" href="struct_r_t_bvector.html#aec3dcced98e75cbc6978d15e5ed66494">y</a>=0;
                    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="lucci_s_e_r_v_i_c_e_8c.html#a82e5109dd05945b2e0464f237c0a37ed" title="Vector normalize.">lucciSERVICE_vect_normalize</a>(<a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a>);
                    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#ade7ab65000699181974a8aaa1344b6d6">control_values</a>.<a class="code" href="struct_r_t_bvehicle__control.html#a95dc455e6b25a751ef6a25e393790334">heading</a>=0;
                    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#ade7ab65000699181974a8aaa1344b6d6">control_values</a>.<a class="code" href="struct_r_t_bvehicle__control.html#a118e4784c87ad9662c72120c663a2afb">speed</a>=0;
<span class="preprocessor">#if (DEBUG == 1)                    </span>
<span class="preprocessor"></span>                    printf(<span class="stringliteral">&quot;Origin reached\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                    <span class="keywordflow">return</span>;
            }
            <span class="keywordflow">if</span> (<a class="code" href="lucci_r_t_b_8c.html#a75f22cf4619e867c40a44dfbca495fe7">RTB_internal_getdistance</a>(localx,localy,<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>) &lt;= <a class="code" href="lucci_r_t_b_8h.html#ae4876f362f4fa4aff9b33bf0aced316c" title="RTB Track-mode waypoint change threshold.">RTB_GUIDE_CHANGE_DIST_TRSH</a> &amp;&amp; <a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a> != NULL)
            {
<span class="preprocessor">#if (SIMUL == 1)</span>
<span class="preprocessor"></span>                playerc_position2d_set_cmd_vel(PlayerLocalPosition2dRelative,0,0,0,1);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                <a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a> = <a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>;
            }

            <span class="keywordflow">if</span> (<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a> == NULL)
            {
                
                <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="lucci_p_l_a_n_8c.html#aa6f57de023316aaa7f944e3d3a69c46a" title="Plan calculate new direction (4 param version.">lucciPLAN_givedir_multiparam</a>(localx, localy, <a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);
                distance = <a class="code" href="lucci_r_t_b_8c.html#a75f22cf4619e867c40a44dfbca495fe7">RTB_internal_getdistance</a>(<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>,<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);
                <span class="keywordflow">if</span> (distance &lt; 2.0)
                    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="lucci_s_e_r_v_i_c_e_8c.html#a2535a221492efde64f81f93be1ae3154" title="Vector set norm.">lucciSERVICE_vect_set_norm</a>(0.4,<a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a>);
                <span class="keywordflow">else</span>
                    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="lucci_s_e_r_v_i_c_e_8c.html#a2535a221492efde64f81f93be1ae3154" title="Vector set norm.">lucciSERVICE_vect_set_norm</a>(1.0,<a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a>);
                
                
            }
            <span class="keywordflow">else</span>
            {
                <span class="keywordflow">if</span> (<a class="code" href="lucci_r_t_b_8c.html#a75f22cf4619e867c40a44dfbca495fe7">RTB_internal_getdistance</a>(<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>,<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>) &lt; 2.0)
                {
                    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="lucci_s_e_r_v_i_c_e_8c.html#a2535a221492efde64f81f93be1ae3154" title="Vector set norm.">lucciSERVICE_vect_set_norm</a>(0.4,<a class="code" href="lucci_p_l_a_n_8c.html#aa6f57de023316aaa7f944e3d3a69c46a" title="Plan calculate new direction (4 param version.">lucciPLAN_givedir_multiparam</a>(localx, localy, <a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>));
                }
                <span class="keywordflow">else</span>
                {
                    <span class="comment">//calcola la congiungente tra i due punti</span>
                    
                    <span class="comment">//calcola la distanza dalla congiungente</span>
                    <span class="comment">/*RTB_FLOAT_TYPE M,Q,c1,c2,d, angle;</span>
<span class="comment">                    c1 = RTB_internal_point_actual-&gt;previous-&gt;y - RTB_internal_point_actual-&gt;y;</span>
<span class="comment">                    c2 = RTB_internal_point_actual-&gt;previous-&gt;x - RTB_internal_point_actual-&gt;x;</span>
<span class="comment">                    M = c1 / c2;</span>
<span class="comment">                    Q = RTB_internal_point_actual-&gt;y - RTB_internal_point_actual-&gt;x / c2;</span>
<span class="comment">                    d = -(localy - localx * M -Q)/sqrt(1+(pow(M,2)));</span>
<span class="comment">                    angle = RTBstatus.control_vector.angle_rad + (d &gt; 0 ? atan(d) : -atan(d));</span>
<span class="comment">                    printf(&quot;Angle to dest %3.2f, correction angle %3.2f\n&quot;, RTBstatus.control_vector.angle_rad, angle);*/</span>
                    <span class="comment">//calcola l&#39;orientamento necessario</span>
                    
                    <a class="code" href="lucci_o_a_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a>.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="lucci_s_e_r_v_i_c_e_8c.html#a2535a221492efde64f81f93be1ae3154" title="Vector set norm.">lucciSERVICE_vect_set_norm</a>(1.0,<a class="code" href="lucci_p_l_a_n_8c.html#aa6f57de023316aaa7f944e3d3a69c46a" title="Plan calculate new direction (4 param version.">lucciPLAN_givedir_multiparam</a>(localx, localy, <a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,<a class="code" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a>-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>));
                }

                
                
            }
            
                
            <span class="keywordflow">break</span>;
        
        <span class="keywordflow">default</span>:
            <span class="keywordflow">break</span>;
    
    }
    
    <a class="code" href="lucci_r_t_b_8c.html#a002529188364ee5f8dfd98667a6adda1">RTB_internal_previous_speed</a>=xspeed;
    <span class="comment">//return &amp;RTBstatus;</span>

}</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="aaba4ff9c624855c9c1cb062b32b3ad9c"></a><!-- doxytag: member="lucciRTB.c::RTB_active" ref="aaba4ff9c624855c9c1cb062b32b3ad9c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lucci_r_t_b_8c.html#aaba4ff9c624855c9c1cb062b32b3ad9c">RTB_active</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00020">20</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3bb446028e9e6cd7f6b913f31f1c2128"></a><!-- doxytag: member="lucciRTB.c::RTB_complete" ref="a3bb446028e9e6cd7f6b913f31f1c2128" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lucci_r_t_b_8c.html#a3bb446028e9e6cd7f6b913f31f1c2128">RTB_complete</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00020">20</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab0b34276659af26c5c4042b940d48c95"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_angular_multiplier" ref="ab0b34276659af26c5c4042b940d48c95" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> <a class="el" href="lucci_r_t_b_8c.html#ab0b34276659af26c5c4042b940d48c95">RTB_internal_angular_multiplier</a> = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00021">21</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="af9649c87998deaf9394a0edcb629395d"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_counter" ref="af9649c87998deaf9394a0edcb629395d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="lucci_r_t_b_8c.html#af9649c87998deaf9394a0edcb629395d">RTB_internal_counter</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00017">17</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00077">RTB_internal_disable()</a>, <a class="el" href="lucci_r_t_b_8c_source.html#l00097">RTB_internal_flush()</a>, and <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a71daa037081252fd247dd0d84314ce42"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_decimator" ref="a71daa037081252fd247dd0d84314ce42" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="lucci_r_t_b_8c.html#a71daa037081252fd247dd0d84314ce42">RTB_internal_decimator</a> = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00017">17</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00097">RTB_internal_flush()</a>.</p>

</div>
</div>
<a class="anchor" id="ad2d5a125474b6b0c15e28a7a9626873b"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_distance" ref="ad2d5a125474b6b0c15e28a7a9626873b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> <a class="el" href="lucci_r_t_b_8c.html#ad2d5a125474b6b0c15e28a7a9626873b">RTB_internal_distance</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00021">21</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a89e3e608a7607eb35972d818e10b4e96"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_distance_threshold" ref="a89e3e608a7607eb35972d818e10b4e96" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> <a class="el" href="lucci_r_t_b_8c.html#a89e3e608a7607eb35972d818e10b4e96">RTB_internal_distance_threshold</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00021">21</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a40fa645b4a40a3a307bf23d7f9f81a0a"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_initialized" ref="a40fa645b4a40a3a307bf23d7f9f81a0a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lucci_r_t_b_8c.html#a40fa645b4a40a3a307bf23d7f9f81a0a">RTB_internal_initialized</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00020">20</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00068">RTB_init()</a>, and <a class="el" href="lucci_r_t_b_8c_source.html#l00088">RTB_set_mode()</a>.</p>

</div>
</div>
<a class="anchor" id="a03cad3139139701ef8825c7b6f208a01"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_longitudinal_multiplier" ref="a03cad3139139701ef8825c7b6f208a01" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> <a class="el" href="lucci_r_t_b_8c.html#a03cad3139139701ef8825c7b6f208a01">RTB_internal_longitudinal_multiplier</a> = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00021">21</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a3fb3962a77966e1b2810180691cc0b40"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_point_actual" ref="a3fb3962a77966e1b2810180691cc0b40" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_t_b__point.html">RTB_point</a>* <a class="el" href="lucci_r_t_b_8c.html#a3fb3962a77966e1b2810180691cc0b40">RTB_internal_point_actual</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00019">19</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

</div>
</div>
<a class="anchor" id="a489dd0158c34cf301e69bc7d36806fc4"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_point_last" ref="a489dd0158c34cf301e69bc7d36806fc4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_t_b__point.html">RTB_point</a> * <a class="el" href="lucci_r_t_b_8c.html#a489dd0158c34cf301e69bc7d36806fc4">RTB_internal_point_last</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00019">19</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00050">RTB_internal_clean_cache()</a>, and <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a5a59086d6bc37d0e66062d6dd4f92484"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_point_next" ref="a5a59086d6bc37d0e66062d6dd4f92484" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_t_b__point.html">RTB_point</a> * <a class="el" href="lucci_r_t_b_8c.html#a5a59086d6bc37d0e66062d6dd4f92484">RTB_internal_point_next</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00019">19</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5d5c94f5051e99a357cdd215e5328f27"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_point_previous" ref="a5d5c94f5051e99a357cdd215e5328f27" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_t_b__point.html">RTB_point</a> * <a class="el" href="lucci_r_t_b_8c.html#a5d5c94f5051e99a357cdd215e5328f27">RTB_internal_point_previous</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00019">19</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6283dc4df5430f9f6aa11609bfa285ff"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_point_start" ref="a6283dc4df5430f9f6aa11609bfa285ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_t_b__point.html">RTB_point</a> * <a class="el" href="lucci_r_t_b_8c.html#a6283dc4df5430f9f6aa11609bfa285ff">RTB_internal_point_start</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00019">19</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="a002529188364ee5f8dfd98667a6adda1"></a><!-- doxytag: member="lucciRTB.c::RTB_internal_previous_speed" ref="a002529188364ee5f8dfd98667a6adda1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lucci_s_e_r_v_i_c_e_8h.html#abba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> <a class="el" href="lucci_r_t_b_8c.html#a002529188364ee5f8dfd98667a6adda1">RTB_internal_previous_speed</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00021">21</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6a825d7aa20bc28a3010567f62d9df7"></a><!-- doxytag: member="lucciRTB.c::RTB_reset" ref="aa6a825d7aa20bc28a3010567f62d9df7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="lucci_r_t_b_8c.html#aa6a825d7aa20bc28a3010567f62d9df7">RTB_reset</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00020">20</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

</div>
</div>
<a class="anchor" id="a82c94e8fea83327122da48f0a719a00b"></a><!-- doxytag: member="lucciRTB.c::RTBstatus" ref="a82c94e8fea83327122da48f0a719a00b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_r_t_b__status.html">RTB_status</a> <a class="el" href="lucci_r_t_b_8c.html#a82c94e8fea83327122da48f0a719a00b">RTBstatus</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="lucci_r_t_b_8c.html">lucciRTB.c</a>      </li>

    <li class="footer">Generated on Mon Jan 28 2013 00:33:05 for robotRTB by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
