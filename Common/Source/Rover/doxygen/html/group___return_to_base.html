<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>robotRTB: ReturnToBase</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">robotRTB
   
   </div>
   <div id="projectbrief">A Return To Base for remote controlled semi authonomous rovers</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group___return_to_base.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ReturnToBase</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_r_t_b__point.html">RTB_point</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Waypoint struct (Cartesian)Used in a list, each element holds essential information for the waypoints acquired during operation.  <a href="struct_r_t_b__point.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#ga5606fd897a0e4790318fa51f8ceaba47">RTB_GEO_MODE_EUCLIDEAN</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB operating mode EUCLIDEAN constant.  <a href="#ga5606fd897a0e4790318fa51f8ceaba47"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#ga0517e541d7d12db3db358a74dbc4c85f">RTB_GEO_MODE_LATLON</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB operating mode Geographical Coordinates constant.  <a href="#ga0517e541d7d12db3db358a74dbc4c85f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#gae3144a34b19548dc9318ae8922383e52">RTB_SAVE_DIST_TRSH</a>&#160;&#160;&#160;10.0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB Record-mode waypoint saving distance threshold.  <a href="#gae3144a34b19548dc9318ae8922383e52"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#gaa91b18b64a0a6cddf9e3db400ef56879">RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB Record-mode adaptive saving distance, speed rate.  <a href="#gaa91b18b64a0a6cddf9e3db400ef56879"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#ga21401443cf513840d9088e18ea406a73">RTB_SAVE_DIST_ADAPTIVE_ANGULAR</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB Record-mode adaptive saving distance, angular rate.  <a href="#ga21401443cf513840d9088e18ea406a73"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#ga69562c01af04d8e9310b8588c646fb38">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>&#160;&#160;&#160;2.0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB Record-mode adaptive saving distance, maximum speed.  <a href="#ga69562c01af04d8e9310b8588c646fb38"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#ga4efaf4d66cac7746e1746e0bdf66038a">RTB_SAVE_DIST_ADAPTIVE_MIN_SPEED</a>&#160;&#160;&#160;0.2</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB Record-mode adaptive saving distance, minimum speed.  <a href="#ga4efaf4d66cac7746e1746e0bdf66038a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#gaf775671092e909720aa83d07369c3e5d">RTB_SAVE_DIST_ADAPTIVE_ANGULAR_SENSITIVITY</a>&#160;&#160;&#160;2</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB Record-mode adaptive saving distance, angular sensitivity.  <a href="#gaf775671092e909720aa83d07369c3e5d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#gaec56cd672d57ef7860c27b9f2f431f5a">RTB_SAVE_DIST_ADAPTIVE_MAX_ANGULAR_SPEED</a>&#160;&#160;&#160;0.8</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB Record-mode adaptive saving distance, maximum angular speed.  <a href="#gaec56cd672d57ef7860c27b9f2f431f5a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#ga6befc91cfa0b08ff06c16443a1898bd5">RTB_FLUSH_DIST_TRSH</a>&#160;&#160;&#160;1.0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB Record-mode waypoint flushing distance threshold.  <a href="#ga6befc91cfa0b08ff06c16443a1898bd5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#gae4876f362f4fa4aff9b33bf0aced316c">RTB_GUIDE_CHANGE_DIST_TRSH</a>&#160;&#160;&#160;1.0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB Track-mode waypoint change threshold.  <a href="#gae4876f362f4fa4aff9b33bf0aced316c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#ga713878e178e5e1d91d0835fd17ce976f">RTB_GUIDE_UPDATE_TIME_TRSH</a>&#160;&#160;&#160;10</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB Track-mode global update frequency.  <a href="#ga713878e178e5e1d91d0835fd17ce976f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#ga89999196aaf3be0aaa4007c7f414c50f">RTB_GEO_MODE</a>&#160;&#160;&#160;<a class="el" href="group___return_to_base.html#ga5606fd897a0e4790318fa51f8ceaba47">RTB_GEO_MODE_EUCLIDEAN</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB operating mode selection.  <a href="#ga89999196aaf3be0aaa4007c7f414c50f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#ga2ebb9772b9fc06f1e5ea7d723f7d2e39">EARTH</a>&#160;&#160;&#160;6371</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB generalized Earth radius in Km.  <a href="#ga2ebb9772b9fc06f1e5ea7d723f7d2e39"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#gab0f01bec4fa5671bf73c5e8721fd8e9c">RTB_MIN_WAYPOINT_DIST</a>&#160;&#160;&#160;1.0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB minimum distance between waypoints.  <a href="#gab0f01bec4fa5671bf73c5e8721fd8e9c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad72dbcf6d0153db1b8d8a58001feed83"></a><!-- doxytag: member="ReturnToBase::DEBUG" ref="gad72dbcf6d0153db1b8d8a58001feed83" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#gad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug define. Set to 1 to enable. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa11c9c27878218cc7f02b64edc9f9622"></a><!-- doxytag: member="ReturnToBase::SIMUL" ref="gaa11c9c27878218cc7f02b64edc9f9622" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#gaa11c9c27878218cc7f02b64edc9f9622">SIMUL</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Simulator define. Set to 1 to enable.This requires Player 3 and Stage 4 to be installed on the system. <br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#gaad21cfc432a06ce440bd0523a1b59563">RTB_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB initialization call.  <a href="#gaad21cfc432a06ce440bd0523a1b59563"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#ga6d094e0fe0de9c382cbceea01b4740d9">RTB_set_mode</a> (<a class="el" href="group___service.html#gaa78d9a33d09f033667c54b439a3aa5c1">RTB_mode</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB mode selection.  <a href="#ga6d094e0fe0de9c382cbceea01b4740d9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___return_to_base.html#ga7700cb21018984ea0a1bc325f0707041">RTB_update</a> (<a class="el" href="group___service.html#gabba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> localx, <a class="el" href="group___service.html#gabba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> localy, <a class="el" href="group___service.html#gabba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> xspeed, <a class="el" href="group___service.html#gabba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a> aspeed)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">RTB main cycle handler.  <a href="#ga7700cb21018984ea0a1bc325f0707041"></a><br/></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga2ebb9772b9fc06f1e5ea7d723f7d2e39"></a><!-- doxytag: member="lucciRTB.h::EARTH" ref="ga2ebb9772b9fc06f1e5ea7d723f7d2e39" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#ga2ebb9772b9fc06f1e5ea7d723f7d2e39">EARTH</a>&#160;&#160;&#160;6371</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB generalized Earth radius in Km. </p>
<p>Generalized Earth radius used in mathematical operations </p>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00171">171</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga6befc91cfa0b08ff06c16443a1898bd5"></a><!-- doxytag: member="lucciRTB.h::RTB_FLUSH_DIST_TRSH" ref="ga6befc91cfa0b08ff06c16443a1898bd5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#ga6befc91cfa0b08ff06c16443a1898bd5">RTB_FLUSH_DIST_TRSH</a>&#160;&#160;&#160;1.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB Record-mode waypoint flushing distance threshold. </p>
<p>During recording the algorithm attempts to optimize the cache of recorded waypoints. This distance is the threshold to which every old point is confronted: if an already known waypoint is found that passes this threshold, the chain of waypoints saved between the actual position and the found one will be deleted. (circular path detection attempt) </p>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00131">131</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga89999196aaf3be0aaa4007c7f414c50f"></a><!-- doxytag: member="lucciRTB.h::RTB_GEO_MODE" ref="ga89999196aaf3be0aaa4007c7f414c50f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#ga89999196aaf3be0aaa4007c7f414c50f">RTB_GEO_MODE</a>&#160;&#160;&#160;<a class="el" href="group___return_to_base.html#ga5606fd897a0e4790318fa51f8ceaba47">RTB_GEO_MODE_EUCLIDEAN</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB operating mode selection. </p>
<p>This value takes either of the RTB_GEO_MODE constants to shape the software's behavior. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group___return_to_base.html#ga5606fd897a0e4790318fa51f8ceaba47" title="RTB operating mode EUCLIDEAN constant.">RTB_GEO_MODE_EUCLIDEAN</a> </dd>
<dd>
<a class="el" href="group___return_to_base.html#ga0517e541d7d12db3db358a74dbc4c85f" title="RTB operating mode Geographical Coordinates constant.">RTB_GEO_MODE_LATLON</a> </dd></dl>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00163">163</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga5606fd897a0e4790318fa51f8ceaba47"></a><!-- doxytag: member="lucciRTB.h::RTB_GEO_MODE_EUCLIDEAN" ref="ga5606fd897a0e4790318fa51f8ceaba47" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#ga5606fd897a0e4790318fa51f8ceaba47">RTB_GEO_MODE_EUCLIDEAN</a>&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB operating mode EUCLIDEAN constant. </p>
<p>Constant used in defining RTB's behavior, it is used in conjunction with the RTB_GEO_MODE variable </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group___return_to_base.html#ga89999196aaf3be0aaa4007c7f414c50f" title="RTB operating mode selection.">RTB_GEO_MODE</a> </dd>
<dd>
<a class="el" href="group___return_to_base.html#ga0517e541d7d12db3db358a74dbc4c85f" title="RTB operating mode Geographical Coordinates constant.">RTB_GEO_MODE_LATLON</a> </dd></dl>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00031">31</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0517e541d7d12db3db358a74dbc4c85f"></a><!-- doxytag: member="lucciRTB.h::RTB_GEO_MODE_LATLON" ref="ga0517e541d7d12db3db358a74dbc4c85f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#ga0517e541d7d12db3db358a74dbc4c85f">RTB_GEO_MODE_LATLON</a>&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB operating mode Geographical Coordinates constant. </p>
<p>Constant used in defining RTB's behavior, it is used in conjunction with the RTB_GEO_MODE variable </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group___return_to_base.html#ga89999196aaf3be0aaa4007c7f414c50f" title="RTB operating mode selection.">RTB_GEO_MODE</a> </dd>
<dd>
<a class="el" href="group___return_to_base.html#ga5606fd897a0e4790318fa51f8ceaba47" title="RTB operating mode EUCLIDEAN constant.">RTB_GEO_MODE_EUCLIDEAN</a> </dd></dl>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00041">41</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae4876f362f4fa4aff9b33bf0aced316c"></a><!-- doxytag: member="lucciRTB.h::RTB_GUIDE_CHANGE_DIST_TRSH" ref="gae4876f362f4fa4aff9b33bf0aced316c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#gae4876f362f4fa4aff9b33bf0aced316c">RTB_GUIDE_CHANGE_DIST_TRSH</a>&#160;&#160;&#160;1.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB Track-mode waypoint change threshold. </p>
<p>This value determines the distance from the current waypoint at which the auto-guidance switches to the next waypoint. </p>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00140">140</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="ga713878e178e5e1d91d0835fd17ce976f"></a><!-- doxytag: member="lucciRTB.h::RTB_GUIDE_UPDATE_TIME_TRSH" ref="ga713878e178e5e1d91d0835fd17ce976f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#ga713878e178e5e1d91d0835fd17ce976f">RTB_GUIDE_UPDATE_TIME_TRSH</a>&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB Track-mode global update frequency. </p>
<p>This represents the decimator used to to perform a global update of all distances of all cached waypoints. The base frequency is represented by the super-loop, thus it is not know to the algorithm. It just chops down the number of times ti gets called by this number, thus performing the global update at a frequency equal to SUPERLOOP-CALLS / RTB_GUIDE_UPDATE_TIME_TRSH </p>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00152">152</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab0f01bec4fa5671bf73c5e8721fd8e9c"></a><!-- doxytag: member="lucciRTB.h::RTB_MIN_WAYPOINT_DIST" ref="gab0f01bec4fa5671bf73c5e8721fd8e9c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#gab0f01bec4fa5671bf73c5e8721fd8e9c">RTB_MIN_WAYPOINT_DIST</a>&#160;&#160;&#160;1.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB minimum distance between waypoints. </p>
<p>Minimum distance between waypoints </p>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00179">179</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="ga21401443cf513840d9088e18ea406a73"></a><!-- doxytag: member="lucciRTB.h::RTB_SAVE_DIST_ADAPTIVE_ANGULAR" ref="ga21401443cf513840d9088e18ea406a73" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#ga21401443cf513840d9088e18ea406a73">RTB_SAVE_DIST_ADAPTIVE_ANGULAR</a>&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB Record-mode adaptive saving distance, angular rate. </p>
<p>When this option is enabled, the distance between two consecutive waypoints is modulated according to the angular speed of the vehicle. Meaning the faster the turns, the more points will be used to store the trajectory. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group___return_to_base.html#gae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a> </dd>
<dd>
<a class="el" href="group___return_to_base.html#gaa91b18b64a0a6cddf9e3db400ef56879" title="RTB Record-mode adaptive saving distance, speed rate.">RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL</a> </dd></dl>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00079">79</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaf775671092e909720aa83d07369c3e5d"></a><!-- doxytag: member="lucciRTB.h::RTB_SAVE_DIST_ADAPTIVE_ANGULAR_SENSITIVITY" ref="gaf775671092e909720aa83d07369c3e5d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#gaf775671092e909720aa83d07369c3e5d">RTB_SAVE_DIST_ADAPTIVE_ANGULAR_SENSITIVITY</a>&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB Record-mode adaptive saving distance, angular sensitivity. </p>
<p>This value controls how intense the sensitivity to the angular rate is. The higher the value the higher the number of stored waypoints during turns. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group___return_to_base.html#gae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a> </dd>
<dd>
<a class="el" href="group___return_to_base.html#ga21401443cf513840d9088e18ea406a73" title="RTB Record-mode adaptive saving distance, angular rate.">RTB_SAVE_DIST_ADAPTIVE_ANGULAR</a> </dd></dl>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00110">110</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa91b18b64a0a6cddf9e3db400ef56879"></a><!-- doxytag: member="lucciRTB.h::RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL" ref="gaa91b18b64a0a6cddf9e3db400ef56879" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#gaa91b18b64a0a6cddf9e3db400ef56879">RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL</a>&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB Record-mode adaptive saving distance, speed rate. </p>
<p>If this option is enabled the above value of maximum distance between two consecutive waypoints, is modulated by the vehicle actual longitudinal speed. The speed is calculated with a simple difference quotient method. Using this capability requires adapting the maximum and minimum vehicle speed values accordingly. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group___return_to_base.html#gae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a> </dd>
<dd>
<a class="el" href="group___return_to_base.html#ga21401443cf513840d9088e18ea406a73" title="RTB Record-mode adaptive saving distance, angular rate.">RTB_SAVE_DIST_ADAPTIVE_ANGULAR</a> </dd>
<dd>
<a class="el" href="group___return_to_base.html#ga69562c01af04d8e9310b8588c646fb38" title="RTB Record-mode adaptive saving distance, maximum speed.">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a> </dd>
<dd>
<a class="el" href="group___return_to_base.html#ga4efaf4d66cac7746e1746e0bdf66038a" title="RTB Record-mode adaptive saving distance, minimum speed.">RTB_SAVE_DIST_ADAPTIVE_MIN_SPEED</a> </dd></dl>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00068">68</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaec56cd672d57ef7860c27b9f2f431f5a"></a><!-- doxytag: member="lucciRTB.h::RTB_SAVE_DIST_ADAPTIVE_MAX_ANGULAR_SPEED" ref="gaec56cd672d57ef7860c27b9f2f431f5a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#gaec56cd672d57ef7860c27b9f2f431f5a">RTB_SAVE_DIST_ADAPTIVE_MAX_ANGULAR_SPEED</a>&#160;&#160;&#160;0.8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB Record-mode adaptive saving distance, maximum angular speed. </p>
<p>The maximum speed the vehicle is capable of turning at. Used internally to normalize the distance between consecutive waypoints. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group___return_to_base.html#gae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a> </dd>
<dd>
<a class="el" href="group___return_to_base.html#ga21401443cf513840d9088e18ea406a73" title="RTB Record-mode adaptive saving distance, angular rate.">RTB_SAVE_DIST_ADAPTIVE_ANGULAR</a> </dd></dl>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00121">121</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="ga69562c01af04d8e9310b8588c646fb38"></a><!-- doxytag: member="lucciRTB.h::RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED" ref="ga69562c01af04d8e9310b8588c646fb38" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#ga69562c01af04d8e9310b8588c646fb38">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>&#160;&#160;&#160;2.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB Record-mode adaptive saving distance, maximum speed. </p>
<p>The maximum speed the vehicle is capable of. Used internally to normalize the distance between consecutive waypoints. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group___return_to_base.html#gae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a> </dd>
<dd>
<a class="el" href="group___return_to_base.html#gaa91b18b64a0a6cddf9e3db400ef56879" title="RTB Record-mode adaptive saving distance, speed rate.">RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL</a> </dd></dl>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00089">89</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4efaf4d66cac7746e1746e0bdf66038a"></a><!-- doxytag: member="lucciRTB.h::RTB_SAVE_DIST_ADAPTIVE_MIN_SPEED" ref="ga4efaf4d66cac7746e1746e0bdf66038a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#ga4efaf4d66cac7746e1746e0bdf66038a">RTB_SAVE_DIST_ADAPTIVE_MIN_SPEED</a>&#160;&#160;&#160;0.2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB Record-mode adaptive saving distance, minimum speed. </p>
<p>The minimum speed the vehicle is capable of. Used internally to normalize the distance between consecutive waypoints. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group___return_to_base.html#gae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a> </dd>
<dd>
<a class="el" href="group___return_to_base.html#gaa91b18b64a0a6cddf9e3db400ef56879" title="RTB Record-mode adaptive saving distance, speed rate.">RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL</a> </dd></dl>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00099">99</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<a class="anchor" id="gae3144a34b19548dc9318ae8922383e52"></a><!-- doxytag: member="lucciRTB.h::RTB_SAVE_DIST_TRSH" ref="gae3144a34b19548dc9318ae8922383e52" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group___return_to_base.html#gae3144a34b19548dc9318ae8922383e52">RTB_SAVE_DIST_TRSH</a>&#160;&#160;&#160;10.0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB Record-mode waypoint saving distance threshold. </p>
<p>This value determines the minimum distance between two consecutive points to use to perform the automatic return-to-base. Points with relative distance inferior to this value are discarded. PLEASE NOTE: the software is unable to determine circular paths, unless this value is such as to fully enclose the path. </p>

<p>Definition at line <a class="el" href="lucci_r_t_b_8h_source.html#l00053">53</a> of file <a class="el" href="lucci_r_t_b_8h_source.html">lucciRTB.h</a>.</p>

<p>Referenced by <a class="el" href="lucci_r_t_b_8c_source.html#l00199">RTB_update()</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaad21cfc432a06ce440bd0523a1b59563"></a><!-- doxytag: member="lucciRTB.h::RTB_init" ref="gaad21cfc432a06ce440bd0523a1b59563" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group___return_to_base.html#gaad21cfc432a06ce440bd0523a1b59563">RTB_init</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB initialization call. </p>
<p>This function must be called when the module is loaded, it sets the internal status to a known state. It is not necessary to call this function any further after initialization. </p>

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00068">68</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>References <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00086">RTB_status::complete</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00087">RTB_status::control_values</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00088">RTB_status::distance</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00037">RTBvehicle_control::heading</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00085">RTB_status::mode</a>, and <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00066">RTB_idle</a>.</p>
<div class="fragment"><pre class="fragment">{
    RTBstatus.<a class="code" href="struct_r_t_b__status.html#a49205220e9d3214b9c8386ef48d57d96">complete</a> = 0;
    RTBstatus.<a class="code" href="struct_r_t_b__status.html#ade7ab65000699181974a8aaa1344b6d6">control_values</a>.<a class="code" href="struct_r_t_bvehicle__control.html#a95dc455e6b25a751ef6a25e393790334">heading</a> = -1;
    RTBstatus.<a class="code" href="struct_r_t_b__status.html#a1c4023bf5a1ee4419371c9250b08b00b">distance</a> = -1;
    RTBstatus.<a class="code" href="struct_r_t_b__status.html#aaa40f3fb35b9e45e6c9ba65c06fa3f03">mode</a> = <a class="code" href="group___service.html#ggaa78d9a33d09f033667c54b439a3aa5c1a1d87f394c2d7bae89a7538660665e17f">RTB_idle</a>;    
    RTB_internal_initialized = 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ga6d094e0fe0de9c382cbceea01b4740d9"></a><!-- doxytag: member="lucciRTB.h::RTB_set_mode" ref="ga6d094e0fe0de9c382cbceea01b4740d9" args="(RTB_mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group___return_to_base.html#ga6d094e0fe0de9c382cbceea01b4740d9">RTB_set_mode</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___service.html#gaa78d9a33d09f033667c54b439a3aa5c1">RTB_mode</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB mode selection. </p>
<p>Used in conjunction with RTB_mode </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group___service.html#gaa78d9a33d09f033667c54b439a3aa5c1" title="RTB operating main mode enumeration.">RTB_mode</a></dd></dl>
<p>Parent program must actively call this function to change operating mode of the module. </p>

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00088">88</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>References <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00085">RTB_status::mode</a>, and <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00066">RTB_idle</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (RTBstatus.<a class="code" href="struct_r_t_b__status.html#aaa40f3fb35b9e45e6c9ba65c06fa3f03">mode</a> &gt; 0 &amp;&amp; mode == <a class="code" href="group___service.html#ggaa78d9a33d09f033667c54b439a3aa5c1a1d87f394c2d7bae89a7538660665e17f">RTB_idle</a>)
        RTB_internal_disable();
    <span class="keywordflow">if</span> (RTBstatus.<a class="code" href="struct_r_t_b__status.html#aaa40f3fb35b9e45e6c9ba65c06fa3f03">mode</a> == <a class="code" href="group___service.html#ggaa78d9a33d09f033667c54b439a3aa5c1a1d87f394c2d7bae89a7538660665e17f">RTB_idle</a>)
        assert (RTB_internal_initialized == 1);
    RTBstatus.<a class="code" href="struct_r_t_b__status.html#aaa40f3fb35b9e45e6c9ba65c06fa3f03">mode</a> = mode;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ga7700cb21018984ea0a1bc325f0707041"></a><!-- doxytag: member="lucciRTB.h::RTB_update" ref="ga7700cb21018984ea0a1bc325f0707041" args="(RTB_FLOAT_TYPE localx, RTB_FLOAT_TYPE localy, RTB_FLOAT_TYPE xspeed, RTB_FLOAT_TYPE aspeed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group___return_to_base.html#ga7700cb21018984ea0a1bc325f0707041">RTB_update</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___service.html#gabba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>localx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___service.html#gabba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>localy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___service.html#gabba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>xspeed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___service.html#gabba453a12cdb776628f5a3b5a67ca9d9">RTB_FLOAT_TYPE</a>&#160;</td>
          <td class="paramname"><em>aspeed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>RTB main cycle handler. </p>
<p>This function must be periodically called to guarantee correct recording of positions. It is designed to be integrated in a superloop. If the module is disabled, calling this function won't affect performance, as no operations will be performed in such a case (the module will check its state and immediately return). </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">localx</td><td>value either euclidean or lon </td></tr>
    <tr><td class="paramname">localy</td><td>value either euclidean or lat </td></tr>
    <tr><td class="paramname">xspeed</td><td></td></tr>
    <tr><td class="paramname">aspeed</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a pointer to the current status </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="struct_r_t_b__status.html" title="RTB main status structure.">RTB_status</a>, <a class="el" href="group___return_to_base.html#ga89999196aaf3be0aaa4007c7f414c50f" title="RTB operating mode selection.">RTB_GEO_MODE</a> </dd></dl>

<p>Definition at line <a class="el" href="lucci_r_t_b_8c_source.html#l00199">199</a> of file <a class="el" href="lucci_r_t_b_8c_source.html">lucciRTB.c</a>.</p>

<p>References <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00087">RTB_status::control_values</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00089">RTB_status::control_vector</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00088">RTB_status::distance</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00234">RTB_point::distance_from_start</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00037">RTBvehicle_control::heading</a>, <a class="el" href="lucci_p_l_a_n_8c_source.html#l00019">lucciPLAN_givedir_multiparam()</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8c_source.html#l00031">lucciSERVICE_vect_normalize()</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8c_source.html#l00054">lucciSERVICE_vect_set_norm()</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00085">RTB_status::mode</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00235">RTB_point::next</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00236">RTB_point::previous</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00027">RTB_FLOAT_TYPE</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00140">RTB_GUIDE_CHANGE_DIST_TRSH</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00179">RTB_MIN_WAYPOINT_DIST</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00067">RTB_recording</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00110">RTB_SAVE_DIST_ADAPTIVE_ANGULAR_SENSITIVITY</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00121">RTB_SAVE_DIST_ADAPTIVE_MAX_ANGULAR_SPEED</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00089">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00099">RTB_SAVE_DIST_ADAPTIVE_MIN_SPEED</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00053">RTB_SAVE_DIST_TRSH</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00068">RTB_tracking</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00038">RTBvehicle_control::speed</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00052">RTBvector::x</a>, <a class="el" href="lucci_r_t_b_8h_source.html#l00232">RTB_point::x</a>, <a class="el" href="lucci_s_e_r_v_i_c_e_8h_source.html#l00053">RTBvector::y</a>, and <a class="el" href="lucci_r_t_b_8h_source.html#l00233">RTB_point::y</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="group___service.html#gabba453a12cdb776628f5a3b5a67ca9d9" title="RTB float type mask definition.">RTB_FLOAT_TYPE</a> distance;
    <span class="keywordflow">switch</span>(RTBstatus.<a class="code" href="struct_r_t_b__status.html#aaa40f3fb35b9e45e6c9ba65c06fa3f03">mode</a>)
    {
        <span class="keywordflow">case</span> <a class="code" href="group___service.html#ggaa78d9a33d09f033667c54b439a3aa5c1a1c21e80be000b896233e829b6c288421">RTB_recording</a>:
            <span class="keywordflow">if</span> (RTB_internal_point_start==NULL)
            {
<span class="preprocessor">#if (DEBUG == 1)</span>
<span class="preprocessor"></span>                printf(<span class="stringliteral">&quot;Actual x and y: %3.2f  -  %3.2f\n&quot;</span>,localx,localy);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                RTB_internal_point_start = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)Used in a list, each element holds essential information for the waypoints...">RTB_point</a>));
                RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>=localx;
                RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>=localy;
                RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#a317ee13f7ee24efb53d59dc696e9abbd">distance_from_start</a>=0;
                RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>=NULL;
                RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>=NULL;
                RTB_internal_point_last = RTB_internal_point_start;
                RTB_internal_counter++;
<span class="preprocessor">#if (SIMUL == 1)                </span>
<span class="preprocessor"></span>                <span class="comment">/* graphic helpers drawing*/</span>
                player_point_2d_t points[4];
                player_color_t color;
                <span class="comment">/*color.blue=20;</span>
<span class="comment">                color.green=20;</span>
<span class="comment">                color.red=255;</span>
<span class="comment">                color.alpha = 160;</span>
<span class="comment">                points[0].px=1+localx;</span>
<span class="comment">                points[0].py=0+localy+local_offset;</span>
<span class="comment">                points[1].px=0+localx;</span>
<span class="comment">                points[1].py=1.5+localy+local_offset;</span>
<span class="comment">                points[2].px=-1+localx;</span>
<span class="comment">                points[2].py=0+localy+local_offset;</span>
<span class="comment">                points[3].px=0+localx;</span>
<span class="comment">                points[3].py=-1.5+localy+local_offset;                </span>
<span class="comment">                playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);*/</span>

                color.blue=20;
                color.green=255;
                color.red=20;
                color.alpha = 160;                
                points[0].px=1+RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[0].py=0+RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+local_offset;
                points[1].px=0+RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[1].py=1.5+RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+local_offset;
                points[2].px=-1+RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[2].py=0+RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+local_offset;
                points[3].px=0+RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>;
                points[3].py=-1.5+RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>+local_offset;                
                playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);
<span class="preprocessor">#endif             </span>
<span class="preprocessor"></span>                <span class="comment">//return &amp;RTBstatus;</span>
            }

<span class="preprocessor">#if (RTB_SAVE_DIST_ADAPTIVE_ANGULAR==0 &amp;&amp; RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL==0)</span>
<span class="preprocessor"></span>            
            RTB_internal_distance = RTB_internal_getdistance(localx,localy,RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);
            <span class="keywordflow">if</span> (RTB_internal_distance &gt;= <a class="code" href="group___return_to_base.html#gae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a>)
            {
                <a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)Used in a list, each element holds essential information for the waypoints...">RTB_point</a> *local_point;
                local_point = RTB_internal_point_last;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a> = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)Used in a list, each element holds essential information for the waypoints...">RTB_point</a>));
                RTB_internal_point_last = RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a> = local_point;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>=NULL;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>=localx;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>=localy;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a317ee13f7ee24efb53d59dc696e9abbd">distance_from_start</a>=RTB_internal_distance;
                RTB_internal_counter++;
<span class="preprocessor">#if (SIMUL == 1)</span>
<span class="preprocessor"></span>                player_color_t color;
                color.blue=255;
                color.green=30;
                color.red=30;
                color.alpha = 160;
                player_point_2d_t points[4];
                points[0].px=0.5+localx;
                points[0].py=0.5+localy+local_offset;
                points[1].px=-0.5+localx;
                points[1].py=0.5+localy+local_offset;
                points[2].px=-0.5+localx;
                points[2].py=-0.5+localy+local_offset;
                points[3].px=0.5+localx;
                points[3].py=-0.5+localy+local_offset;                
                playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);
<span class="preprocessor">#endif (SIMUL == 1)</span>
<span class="preprocessor"></span>
            }
            RTB_internal_flush(localx,localy);
            RTBstatus.<a class="code" href="struct_r_t_b__status.html#a1c4023bf5a1ee4419371c9250b08b00b">distance</a> = RTB_internal_getdistance(localx,localy,RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);

<span class="preprocessor">#else</span>
<span class="preprocessor"></span><span class="preprocessor">#if (RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL)</span>
<span class="preprocessor"></span>            <span class="keywordflow">if</span> (xspeed == 0)
                xspeed = <a class="code" href="group___return_to_base.html#ga69562c01af04d8e9310b8588c646fb38" title="RTB Record-mode adaptive saving distance, maximum speed.">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>;
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xspeed &lt; <a class="code" href="group___return_to_base.html#ga4efaf4d66cac7746e1746e0bdf66038a" title="RTB Record-mode adaptive saving distance, minimum speed.">RTB_SAVE_DIST_ADAPTIVE_MIN_SPEED</a>)
                xspeed = <a class="code" href="group___return_to_base.html#ga4efaf4d66cac7746e1746e0bdf66038a" title="RTB Record-mode adaptive saving distance, minimum speed.">RTB_SAVE_DIST_ADAPTIVE_MIN_SPEED</a>;
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (xspeed &gt; <a class="code" href="group___return_to_base.html#ga69562c01af04d8e9310b8588c646fb38" title="RTB Record-mode adaptive saving distance, maximum speed.">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>)
                xspeed = <a class="code" href="group___return_to_base.html#ga69562c01af04d8e9310b8588c646fb38" title="RTB Record-mode adaptive saving distance, maximum speed.">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>            RTB_internal_longitudinal_multiplier = 1;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>            
            RTB_internal_longitudinal_multiplier = xspeed / <a class="code" href="group___return_to_base.html#ga69562c01af04d8e9310b8588c646fb38" title="RTB Record-mode adaptive saving distance, maximum speed.">RTB_SAVE_DIST_ADAPTIVE_MAX_SPEED</a>;
            
            
<span class="preprocessor">#if (RTB_SAVE_DIST_ADAPTIVE_ANGULAR)</span>
<span class="preprocessor"></span>            <span class="keywordflow">if</span> (aspeed == 0)
                RTB_internal_angular_multiplier = 1;
            <span class="keywordflow">else</span>
            {
                
                
                RTB_internal_angular_multiplier = 1 - <a class="code" href="group___return_to_base.html#gaf775671092e909720aa83d07369c3e5d" title="RTB Record-mode adaptive saving distance, angular sensitivity.">RTB_SAVE_DIST_ADAPTIVE_ANGULAR_SENSITIVITY</a>*(sqrt(aspeed*aspeed)/<a class="code" href="group___return_to_base.html#gaec56cd672d57ef7860c27b9f2f431f5a" title="RTB Record-mode adaptive saving distance, maximum angular speed.">RTB_SAVE_DIST_ADAPTIVE_MAX_ANGULAR_SPEED</a>);
                <span class="keywordflow">if</span> (RTB_internal_angular_multiplier &lt; 0.05)
                    RTB_internal_angular_multiplier = 0.05;
                <span class="keywordflow">if</span> (RTB_internal_angular_multiplier &gt; 1)
                    RTB_internal_angular_multiplier = 1;
            }
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>            RTB_internal_angular_multiplier = 1;
            
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>            
            RTB_internal_distance_threshold = MIN(<a class="code" href="group___return_to_base.html#gae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a> * RTB_internal_longitudinal_multiplier, <a class="code" href="group___return_to_base.html#gae3144a34b19548dc9318ae8922383e52" title="RTB Record-mode waypoint saving distance threshold.">RTB_SAVE_DIST_TRSH</a>*RTB_internal_angular_multiplier);
            <span class="keywordflow">if</span> (RTB_internal_distance_threshold &lt; <a class="code" href="group___return_to_base.html#gab0f01bec4fa5671bf73c5e8721fd8e9c" title="RTB minimum distance between waypoints.">RTB_MIN_WAYPOINT_DIST</a>)
                RTB_internal_distance_threshold = <a class="code" href="group___return_to_base.html#gab0f01bec4fa5671bf73c5e8721fd8e9c" title="RTB minimum distance between waypoints.">RTB_MIN_WAYPOINT_DIST</a>;
            
            <span class="comment">//dbg_print(&quot;RTB&quot;,&quot;Long_mult %3.2f, Ang_mult %3.2f, dst_trsh %3.2f\n&quot;,RTB_internal_longitudinal_multiplier, RTB_internal_angular_multiplier, RTB_internal_distance_threshold);</span>
                        
            RTB_internal_distance = RTB_internal_getdistance(localx,localy,RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);
            <span class="keywordflow">if</span> (RTB_internal_distance &gt;= RTB_internal_distance_threshold)
            {
                <a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)Used in a list, each element holds essential information for the waypoints...">RTB_point</a> *local_point;
                local_point = RTB_internal_point_last;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a> = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_r_t_b__point.html" title="Waypoint struct (Cartesian)Used in a list, each element holds essential information for the waypoints...">RTB_point</a>));
                RTB_internal_point_last = RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a> = local_point;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a>=NULL;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>=localx;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>=localy;
                RTB_internal_point_last-&gt;<a class="code" href="struct_r_t_b__point.html#a317ee13f7ee24efb53d59dc696e9abbd">distance_from_start</a>=RTB_internal_distance;
                RTB_internal_counter++;
<span class="preprocessor">#if (SIMUL == 1)                </span>
<span class="preprocessor"></span>                player_color_t color;
                color.blue=255;
                color.green=30;
                color.red=30;
                color.alpha = 160;
                player_point_2d_t points[4];
                points[0].px=0.5+localx;
                points[0].py=0.5+localy+local_offset;
                points[1].px=-0.5+localx;
                points[1].py=0.5+localy+local_offset;
                points[2].px=-0.5+localx;
                points[2].py=-0.5+localy+local_offset;
                points[3].px=0.5+localx;
                points[3].py=-0.5+localy+local_offset;                
                playerc_graphics2d_draw_polygon(PlayerLocalGraphics2D,points,4,1,color);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
            }
            RTB_internal_flush(localx,localy);
            RTBstatus.<a class="code" href="struct_r_t_b__status.html#a1c4023bf5a1ee4419371c9250b08b00b">distance</a> = RTB_internal_getdistance(localx,localy,RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_start-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);
            
<span class="comment">/*</span>
<span class="comment">#elif (RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL &amp;&amp; !RTB_SAVE_DIST_ADAPTIVE_ANGULAR)</span>
<span class="comment">            int a = 1;</span>
<span class="comment">            </span>
<span class="comment">#elif (!RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL &amp;&amp; RTB_SAVE_DIST_ADAPTIVE_ANGULAR)</span>
<span class="comment">            int a = 1;</span>
<span class="comment">            </span>
<span class="comment">#elif (RTB_SAVE_DIST_ADAPTIVE_LONGITUDINAL &amp;&amp; RTB_SAVE_DIST_ADAPTIVE_ANGULAR)</span>
<span class="comment">            int a = 1;*/</span>
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>            RTB_internal_point_actual = RTB_internal_point_last;
        <span class="keywordflow">break</span>;
    
        <span class="keywordflow">case</span> <a class="code" href="group___service.html#ggaa78d9a33d09f033667c54b439a3aa5c1ae6cbb9f39ed9b2d62465b452b4b13b9f">RTB_tracking</a>:
            
            <span class="comment">//RTB_internal_flush(localx,localy);</span>
            <span class="keywordflow">if</span> (RTB_internal_point_actual == RTB_internal_point_start)
            {
                    RTBstatus.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a>.<a class="code" href="struct_r_t_bvector.html#a3bc7ea081d3ac2063258f6c30703055a">x</a>=0;
                    RTBstatus.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a>.<a class="code" href="struct_r_t_bvector.html#aec3dcced98e75cbc6978d15e5ed66494">y</a>=0;
                    RTBstatus.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="group___service.html#ga82e5109dd05945b2e0464f237c0a37ed" title="Vector normalize.">lucciSERVICE_vect_normalize</a>(RTBstatus.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a>);
                    RTBstatus.<a class="code" href="struct_r_t_b__status.html#ade7ab65000699181974a8aaa1344b6d6">control_values</a>.<a class="code" href="struct_r_t_bvehicle__control.html#a95dc455e6b25a751ef6a25e393790334">heading</a>=0;
                    RTBstatus.<a class="code" href="struct_r_t_b__status.html#ade7ab65000699181974a8aaa1344b6d6">control_values</a>.<a class="code" href="struct_r_t_bvehicle__control.html#a118e4784c87ad9662c72120c663a2afb">speed</a>=0;
<span class="preprocessor">#if (DEBUG == 1)                    </span>
<span class="preprocessor"></span>                    printf(<span class="stringliteral">&quot;Origin reached\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                    <span class="keywordflow">return</span>;
            }
            <span class="keywordflow">if</span> (RTB_internal_getdistance(localx,localy,RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>) &lt;= <a class="code" href="group___return_to_base.html#gae4876f362f4fa4aff9b33bf0aced316c" title="RTB Track-mode waypoint change threshold.">RTB_GUIDE_CHANGE_DIST_TRSH</a> &amp;&amp; RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a> != NULL)
            {
<span class="preprocessor">#if (SIMUL == 1)</span>
<span class="preprocessor"></span>                playerc_position2d_set_cmd_vel(PlayerLocalPosition2dRelative,0,0,0,1);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                RTB_internal_point_actual = RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>;
            }

            <span class="keywordflow">if</span> (RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#a72970472fa840bf08befb1da7f3c159d">next</a> == NULL)
            {
                
                RTBstatus.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="group___plan.html#gaa6f57de023316aaa7f944e3d3a69c46a" title="Plan calculate new direction (4 param version.">lucciPLAN_givedir_multiparam</a>(localx, localy, RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);
                distance = RTB_internal_getdistance(RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>,RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>);
                <span class="keywordflow">if</span> (distance &lt; 2.0)
                    RTBstatus.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="group___service.html#ga2535a221492efde64f81f93be1ae3154" title="Vector set norm.">lucciSERVICE_vect_set_norm</a>(0.4,RTBstatus.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a>);
                <span class="keywordflow">else</span>
                    RTBstatus.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="group___service.html#ga2535a221492efde64f81f93be1ae3154" title="Vector set norm.">lucciSERVICE_vect_set_norm</a>(1.0,RTBstatus.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a>);
                
                
            }
            <span class="keywordflow">else</span>
            {
                <span class="keywordflow">if</span> (RTB_internal_getdistance(RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>,RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>) &lt; 2.0)
                {
                    RTBstatus.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="group___service.html#ga2535a221492efde64f81f93be1ae3154" title="Vector set norm.">lucciSERVICE_vect_set_norm</a>(0.4,<a class="code" href="group___plan.html#gaa6f57de023316aaa7f944e3d3a69c46a" title="Plan calculate new direction (4 param version.">lucciPLAN_givedir_multiparam</a>(localx, localy, RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>));
                }
                <span class="keywordflow">else</span>
                {
                    <span class="comment">//calcola la congiungente tra i due punti</span>
                    
                    <span class="comment">//calcola la distanza dalla congiungente</span>
                    <span class="comment">/*RTB_FLOAT_TYPE M,Q,c1,c2,d, angle;</span>
<span class="comment">                    c1 = RTB_internal_point_actual-&gt;previous-&gt;y - RTB_internal_point_actual-&gt;y;</span>
<span class="comment">                    c2 = RTB_internal_point_actual-&gt;previous-&gt;x - RTB_internal_point_actual-&gt;x;</span>
<span class="comment">                    M = c1 / c2;</span>
<span class="comment">                    Q = RTB_internal_point_actual-&gt;y - RTB_internal_point_actual-&gt;x / c2;</span>
<span class="comment">                    d = -(localy - localx * M -Q)/sqrt(1+(pow(M,2)));</span>
<span class="comment">                    angle = RTBstatus.control_vector.angle_rad + (d &gt; 0 ? atan(d) : -atan(d));</span>
<span class="comment">                    printf(&quot;Angle to dest %3.2f, correction angle %3.2f\n&quot;, RTBstatus.control_vector.angle_rad, angle);*/</span>
                    <span class="comment">//calcola l&#39;orientamento necessario</span>
                    
                    RTBstatus.<a class="code" href="struct_r_t_b__status.html#aa74b7d8f1cf53e387ec7c94a41bc3183">control_vector</a> = <a class="code" href="group___service.html#ga2535a221492efde64f81f93be1ae3154" title="Vector set norm.">lucciSERVICE_vect_set_norm</a>(1.0,<a class="code" href="group___plan.html#gaa6f57de023316aaa7f944e3d3a69c46a" title="Plan calculate new direction (4 param version.">lucciPLAN_givedir_multiparam</a>(localx, localy, RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#a5f535030e389ebbebe045f06c6f8732b">x</a>,RTB_internal_point_actual-&gt;<a class="code" href="struct_r_t_b__point.html#ab193c948cf6c0ea2a33cdc58657d4d19">previous</a>-&gt;<a class="code" href="struct_r_t_b__point.html#af5d7221e1168d884e253c2df96b4bf8e">y</a>));
                }

                
                
            }
            
                
            <span class="keywordflow">break</span>;
        
        <span class="keywordflow">default</span>:
            <span class="keywordflow">break</span>;
    
    }
    
    RTB_internal_previous_speed=xspeed;
    <span class="comment">//return &amp;RTBstatus;</span>

}</pre></div>
</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Mon Jan 28 2013 01:12:55 for robotRTB by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
